{% extends 'base.html' %}

{% block content %}
<section class="scanner scan-image-container">
    <div class="scanner-header">
        <div class="scanner-title">
            <h1>Scan Image or Text Message</h1>
            <p class="scanner-description">Upload any image or screenshot to scan for potential threats. Our AI-powered system analyzes images, detects text messages, and provides clear explanations about the content safety.</p>
        </div>
        <div class="scanner-icon">
            <i class="fas fa-image-shield"></i>
            <div class="pulse-ring"></div>
        </div>
    </div>
    
    <div class="scanner-content">
        <div class="form-card">
            <form action="{{ url_for('scan_image') }}" method="POST" enctype="multipart/form-data">
                <div class="drop-zone">
                    <input type="file" name="image" id="image-input" accept="image/*" required>
                    <div class="drop-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <p class="drop-text">Drag & drop your image or text message screenshot here, or click to select</p>
                    <p class="selected-file" id="selected-file-name">No image selected</p>
                </div>
                <div class="accepted-formats">
                    <p>Supported formats: JPG, PNG, GIF, BMP, TIFF</p>
                    <p class="ocr-note">Our scanner automatically extracts and analyzes all text in your image</p>
                </div>
                
                <button type="submit" class="btn btn-primary scan-btn">
                    <i class="fas fa-shield-check"></i> Scan Image
                </button>
            </form>
        </div>
        
        <div class="info-card">
            <div class="card-header">
                <i class="fas fa-info-circle"></i>
                <h3>How Our Image Scanner Works</h3>
            </div>
            <div class="card-body">
                <div class="scan-feature">
                    <div class="feature-icon"><i class="fas fa-eye"></i></div>
                    <div class="feature-text">
                        <h4>Visual Analysis</h4>
                        <p>We analyze image patterns to detect signs of manipulation, suspicious content, and other visual red flags.</p>
                    </div>
                </div>
                <div class="scan-feature">
                    <div class="feature-icon"><i class="fas fa-file-alt"></i></div>
                    <div class="feature-text">
                        <h4>Text Extraction</h4>
                        <p>Our advanced OCR technology extracts and analyzes all text in your images to identify scam indicators.</p>
                    </div>
                </div>
                <div class="scan-feature">
                    <div class="feature-icon"><i class="fas fa-sms"></i></div>
                    <div class="feature-text">
                        <h4>Text Message Analysis</h4>
                        <p>Specialized detection for text message screenshots with pattern recognition for common scam formats.</p>
                    </div>
                </div>
                <div class="scan-feature">
                    <div class="feature-icon"><i class="fas fa-qrcode"></i></div>
                    <div class="feature-text">
                        <h4>QR Code Detection</h4>
                        <p>We detect and analyze QR codes in images, checking embedded URLs for potential threats.</p>
                    </div>
                </div>
                <div class="scan-feature">
                    <div class="feature-icon"><i class="fas fa-brain"></i></div>
                    <div class="feature-text">
                        <h4>AI-Powered Explanation</h4>
                        <p>Our AI provides clear, detailed explanations of why your image is safe or potentially dangerous.</p>
                    </div>
                </div>
                <div class="scan-note">
                    <i class="fas fa-lock"></i>
                    <p>For your privacy, we don't store your uploaded images after analysis is complete.</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="ai-explanation-section">
        <h2><i class="fas fa-brain"></i> AI-Powered Safety Analysis</h2>
        <p class="explanation-intro">Our advanced AI doesn't just tell you if an image is safe or not - it explains <em>why</em>, helping you build knowledge to protect yourself from future scams.</p>
        
        <div class="explanation-examples">
            <div class="explanation-card safe">
                <div class="card-label">
                    <i class="fas fa-check-circle"></i>
                    <span>Safe Image Explanation Example</span>
                </div>
                <div class="card-content">
                    <p class="example-text">"This image appears to be safe based on multiple factors. The visual patterns don't match known scam templates, there are no suspicious QR codes present, and the extracted text doesn't contain urgent calls to action, requests for personal information, or deceptive offers. The image metadata also shows no signs of manipulation."</p>
                </div>
            </div>
            
            <div class="explanation-card warning">
                <div class="card-label">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Suspicious Image Explanation Example</span>
                </div>
                <div class="card-content">
                    <p class="example-text">"This image contains several suspicious elements. The text includes urgent language ('Act now!'), unrealistic financial promises ('Earn $5,000 daily'), and requests for personal information. The URL embedded in the image redirects through multiple domains, which is a common phishing tactic. We recommend avoiding any interaction with the content in this image."</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="text-message-section">
        <h2><i class="fas fa-sms"></i> Specialized Text Message Analysis</h2>
        <p class="text-message-intro">Text message scams (smishing) are increasingly common. Our specialized detection identifies the visual patterns of messaging apps and analyzes the content for these common threats:</p>
        
        <div class="text-scam-grid">
            <div class="text-scam-card">
                <div class="scam-icon"><i class="fas fa-shipping-fast"></i></div>
                <h3>Package Delivery Scams</h3>
                <p>Messages claiming to be from shipping companies about delivery issues, requiring you to click a link or provide information.</p>
            </div>
            
            <div class="text-scam-card">
                <div class="scam-icon"><i class="fas fa-university"></i></div>
                <h3>Banking/Financial Alerts</h3>
                <p>Fake messages about account problems, unauthorized charges, or frozen accounts requiring immediate action.</p>
            </div>
            
            <div class="text-scam-card">
                <div class="scam-icon"><i class="fas fa-landmark"></i></div>
                <h3>Government/Tax Scams</h3>
                <p>Messages claiming to be from tax authorities or government agencies about refunds, benefits, or legal issues.</p>
            </div>
            
            <div class="text-scam-card">
                <div class="scam-icon"><i class="fas fa-gift"></i></div>
                <h3>Prize Notifications</h3>
                <p>Messages claiming you've won something and need to click a link or call a number to claim your prize.</p>
            </div>
        </div>
    </div>
</section>

<style>
    /* Scanner Styles */
    .scanner {
        max-width: 1000px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .scanner-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 30px;
        position: relative;
    }

    .scanner-title {
        flex: 1;
    }

    .scanner h1 {
        color: var(--primary-color);
        font-size: 2.2rem;
        margin-bottom: 10px;
        font-weight: 700;
        position: relative;
    }

    .scanner-description {
        color: var(--dark-color);
        font-size: 1.05rem;
        margin-bottom: 20px;
        max-width: 700px;
        line-height: 1.6;
    }

    .scanner-icon {
        font-size: 2.5rem;
        color: var(--secondary-color);
        margin-left: 20px;
        position: relative;
    }
    
    .scanner-icon .pulse-ring {
        width: 60px;
        height: 60px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0, 166, 183, 0.1);
        border-radius: 50%;
        animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
        0% {
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0.8;
        }
        70% {
            transform: translate(-50%, -50%) scale(1.2);
            opacity: 0;
        }
        100% {
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0;
        }
    }
    
    /* Content layout */
    .scanner-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
    }

    /* Form Card */
    .form-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        padding: 30px;
        transition: transform 0.3s ease;
    }
    
    .form-card:hover {
        transform: translateY(-5px);
    }

    /* Drop Zone */
    .drop-zone {
        border: 2px dashed var(--secondary-color);
        border-radius: 10px;
        background-color: rgba(0, 166, 183, 0.05);
        padding: 40px 30px;
        text-align: center;
        transition: all 0.3s ease;
        position: relative;
        margin-bottom: 15px;
        cursor: pointer;
    }
    
    .drop-zone:hover, 
    .drop-zone.active {
        background-color: rgba(0, 166, 183, 0.1);
        border-color: var(--primary-color);
    }
    
    .drop-zone input[type="file"] {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        opacity: 0;
        cursor: pointer;
    }
    
    .drop-icon {
        font-size: 3rem;
        color: var(--secondary-color);
        margin-bottom: 15px;
        transition: transform 0.3s ease;
    }
    
    .drop-zone:hover .drop-icon,
    .drop-zone.active .drop-icon {
        transform: scale(1.1);
        color: var(--primary-color);
    }
    
    .drop-text {
        font-size: 1rem;
        color: var(--dark-color);
        margin-bottom: 10px;
    }
    
    .selected-file {
        font-size: 0.9rem;
        color: var(--secondary-color);
        font-weight: 600;
        margin-top: 10px;
    }

    .selected-file.file-selected {
        color: var(--primary-color);
    }

    .drop-zone.has-file {
        border-color: var(--primary-color);
        background-color: rgba(0, 166, 183, 0.08);
    }

    .accepted-formats {
        font-size: 0.85rem;
        color: var(--dark-color);
        opacity: 0.7;
        margin-bottom: 20px;
        text-align: center;
    }
    
    .ocr-note {
        color: var(--primary-color);
        font-weight: 500;
        margin-top: 5px;
        font-size: 0.9rem;
        opacity: 0.9;
    }
    
    /* Info Card */
    .info-card {
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        transition: transform 0.3s ease;
    }
    
    .info-card:hover {
        transform: translateY(-5px);
    }
    
    .card-header {
        background: var(--gradient-primary);
        color: white;
        padding: 15px 30px;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    
    .card-header h3 {
        margin: 0;
        font-size: 1.2rem;
        font-weight: 600;
    }
    
    .card-body {
        padding: 25px 30px;
    }
    
    /* Scan Features */
    .scan-feature {
        display: flex;
        align-items: flex-start;
        gap: 15px;
        margin-bottom: 20px;
        padding-bottom: 15px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .scan-feature:last-of-type {
        border-bottom: none;
        margin-bottom: 0;
    }
    
    .feature-icon {
        background-color: rgba(0, 166, 183, 0.1);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--secondary-color);
        font-size: 1rem;
    }
    
    .feature-text h4 {
        margin: 0 0 5px 0;
        font-size: 1rem;
        color: var(--primary-color);
    }
    
    .feature-text p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--dark-color);
        line-height: 1.4;
    }
    
    .scan-note {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 20px;
        padding: 15px;
        background-color: rgba(255, 140, 66, 0.1);
        border-radius: 8px;
    }
    
    .scan-note i {
        color: var(--accent-color);
        font-size: 1.2rem;
    }
    
    .scan-note p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--dark-color);
    }
    
    /* Scan Button */
    .scan-btn {
        width: 100%;
        padding: 14px;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s ease;
        background: var(--primary-color);
        color: white;
        border: none;
        margin-top: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }
    
    .scan-btn:hover {
        background: var(--secondary-color);
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    
    /* AI Explanation Section */
    .ai-explanation-section {
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        padding: 35px;
        margin-bottom: 40px;
        text-align: center;
    }
    
    .ai-explanation-section h2 {
        color: var(--primary-color);
        font-size: 1.8rem;
        margin-bottom: 15px;
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 12px;
    }
    
    .ai-explanation-section h2:after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background-color: var(--secondary-color);
        border-radius: 2px;
    }
    
    .explanation-intro {
        max-width: 800px;
        margin: 0 auto 30px;
        font-size: 1.1rem;
        color: var(--dark-color);
        line-height: 1.6;
    }
    
    .explanation-examples {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 25px;
    }
    
    .explanation-card {
        text-align: left;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .explanation-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    .explanation-card.safe {
        border: 1px solid rgba(0, 176, 155, 0.3);
    }
    
    .explanation-card.warning {
        border: 1px solid rgba(255, 140, 66, 0.3);
    }
    
    .card-label {
        padding: 12px 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .explanation-card.safe .card-label {
        background-color: rgba(0, 176, 155, 0.1);
        color: var(--success-color);
    }
    
    .explanation-card.warning .card-label {
        background-color: rgba(255, 140, 66, 0.1);
        color: var(--accent-color);
    }
    
    .card-label i {
        font-size: 1.2rem;
    }
    
    .card-label span {
        font-weight: 600;
        font-size: 1.05rem;
    }
    
    .card-content {
        padding: 20px;
        background-color: white;
    }
    
    .example-text {
        margin: 0;
        font-size: 0.95rem;
        color: var(--dark-color);
        line-height: 1.6;
    }
    
    /* Text Message Section */
    .text-message-section {
        background: white;
        border-radius: 16px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        padding: 35px;
        text-align: center;
    }
    
    .text-message-section h2 {
        color: var(--primary-color);
        font-size: 1.8rem;
        margin-bottom: 15px;
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 12px;
    }
    
    .text-message-section h2:after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 3px;
        background-color: var(--secondary-color);
        border-radius: 2px;
    }
    
    .text-message-intro {
        max-width: 800px;
        margin: 0 auto 30px;
        font-size: 1.1rem;
        color: var(--dark-color);
        line-height: 1.6;
    }
    
    .text-scam-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }
    
    .text-scam-card {
        background-color: #f9f9f9;
        border-radius: 12px;
        padding: 25px;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        border-top: 4px solid var(--secondary-color);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }
    
    .text-scam-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    
    .text-scam-card .scam-icon {
        width: 60px;
        height: 60px;
        background-color: rgba(0, 166, 183, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        color: var(--secondary-color);
        font-size: 1.6rem;
    }
    
    .text-scam-card h3 {
        color: var(--primary-color);
        font-size: 1.1rem;
        margin-bottom: 10px;
        font-weight: 600;
    }
    
    .text-scam-card p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--dark-color);
        line-height: 1.5;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
        .scanner-content {
            grid-template-columns: 1fr;
        }
        
        .explanation-examples {
            grid-template-columns: 1fr;
        }
        
        .text-scam-grid {
            grid-template-columns: 1fr 1fr;
        }
    }
    
    @media (max-width: 576px) {
        .text-scam-grid {
            grid-template-columns: 1fr;
        }
        
        .scanner-header {
            flex-direction: column;
        }
        
        .scanner-icon {
            margin-left: 0;
            margin-top: 20px;
            align-self: center;
        }
    }
</style>

<!-- Include the image upload JavaScript file -->
<script src="{{ url_for('static', filename='js/image-upload.js') }}"></script>
{% endblock %}